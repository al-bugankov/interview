import{d as x,M as U,r as c,N as g,h,a as v,c as b,j as u,b as m,O as L,i as y,e as E,f as A,E as w,_ as I,u as V,m as k,P as C,t as S}from"./index-BvhJ-PTi.js";const N=x({__name:"AuthFrom",props:{isUserAlreadyExist:{type:Boolean}},setup(T){const o=T,r=U(),d=E(),a=c(""),s=c(""),l=c(!1),p=g(()=>o.isUserAlreadyExist?"Вход":"Регистрация"),_=async()=>{if(l.value=!0,o.isUserAlreadyExist){if(!await r.signIn(a.value,s.value)){l.value=!1;return}l.value=!1,await d.push({name:w.INTERVIEW_LIST});return}if(!await r.signUp(a.value,s.value)){l.value=!1;return}l.value=!1,await d.push({name:w.INTERVIEW_LIST})};return(f,e)=>{const t=A("app-input-text"),i=A("app-button");return h(r).isAuthTypeTelegram?y("",!0):(v(),b("form",{key:0,class:"auth-form",onSubmit:L(_,["prevent"])},[e[2]||(e[2]=u("label",{class:"auth-form__label auth-form__label--email",for:"email"},"Email",-1)),m(t,{id:"email",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n),class:"auth-form__input auth-form__input--email",type:"email"},null,8,["modelValue"]),e[3]||(e[3]=u("label",{class:"auth-form__label auth-form__label--password",for:"password"},"Password",-1)),m(t,{id:"password",modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=n=>s.value=n),class:"auth-form__input auth-form__input--password",type:"password"},null,8,["modelValue"]),m(i,{disabled:s.value.length<1||a.value.length<1,label:p.value,loading:l.value,class:"auth-form__button--submit",icon:"pi pi-user",type:"submit"},null,8,["disabled","label","loading"])],32))}}}),R=I(N,[["__scopeId","data-v-86a83a1e"]]),B={key:0,class:"content-container"},D={class:"auth-container"},O={class:"auth-container__header"},W={class:"auth-container__header-subtitle"},F={key:0,class:"auth-container__email-toggle"},M={class:"auth-container__email-toggle-subtitle"},P=x({__name:"AuthLogin",setup(T){const o=U(),r=V(),d=E(),a=c(null),s=c(!0),l=()=>{s.value=!s.value},p=g(()=>s.value?"Аккаунта еще нет?":"Уже есть аккаунт?"),_=g(()=>s.value?"Создайте сейчас":"Авторизуйтесь"),f=async e=>{console.log("Зашли в функцию loginOrRigister");const t=`${e.id}@gmail.com`,i="commonPassword2024",n=await o.signIn(t,i);console.log("Залогинились через loginOrRigister"),!(!n&&!await o.signUp(t,i))&&(await d.push({name:w.INTERVIEW_LIST}),r.isGlobalLoading=!1)};return k(()=>{C(()=>{if(window.Telegram&&window.Telegram.WebApp){const t=window.Telegram.WebApp.initData;if(t){r.isGlobalLoading=!0,o.isAuthTypeTelegram=!0;const n=decodeURIComponent(t).match(/user=({.*?})/);a.value=n?JSON.parse(n[1]):null,a.value&&f(a.value)}}})}),(e,t)=>h(o).isAuthTypeTelegram?y("",!0):(v(),b("div",B,[u("div",D,[u("div",O,[t[0]||(t[0]=u("div",{class:"auth-container__header-title"},"Привет!",-1)),u("div",W,[h(o).isAuthTypeTelegram?y("",!0):(v(),b("div",F,[u("span",M,S(p.value),1),u("a",{class:"font-medium ml-2 cursor-pointer",onClick:l},S(_.value),1)]))])]),m(R,{"is-user-already-exist":s.value},null,8,["is-user-already-exist"])])]))}}),j=I(P,[["__scopeId","data-v-2c1e7e85"]]);export{j as default};
