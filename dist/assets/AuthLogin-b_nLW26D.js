import{d as U,M as x,r as c,N as h,h as v,a as g,c as b,j as n,b as m,O as L,i as y,e as E,f as A,E as w,_ as I,u as V,m as k,t as S}from"./index-CKm8tBeE.js";const C=U({__name:"AuthFrom",props:{isUserAlreadyExist:{type:Boolean}},setup(T){const a=T,r=x(),d=E(),o=c(""),t=c(""),l=c(!1),p=h(()=>a.isUserAlreadyExist?"Вход":"Регистрация"),_=async()=>{if(l.value=!0,a.isUserAlreadyExist){if(!await r.signIn(o.value,t.value)){l.value=!1;return}l.value=!1,await d.push({name:w.INTERVIEW_LIST});return}if(!await r.signUp(o.value,t.value)){l.value=!1;return}l.value=!1,await d.push({name:w.INTERVIEW_LIST})};return(f,e)=>{const s=A("app-input-text"),i=A("app-button");return v(r).isAuthTypeTelegram?y("",!0):(g(),b("form",{key:0,class:"auth-form",onSubmit:L(_,["prevent"])},[e[2]||(e[2]=n("label",{class:"auth-form__label auth-form__label--email",for:"email"},"Email",-1)),m(s,{id:"email",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=u=>o.value=u),class:"auth-form__input auth-form__input--email",type:"email"},null,8,["modelValue"]),e[3]||(e[3]=n("label",{class:"auth-form__label auth-form__label--password",for:"password"},"Password",-1)),m(s,{id:"password",modelValue:t.value,"onUpdate:modelValue":e[1]||(e[1]=u=>t.value=u),class:"auth-form__input auth-form__input--password",type:"password"},null,8,["modelValue"]),m(i,{label:p.value,loading:l.value,class:"auth-form__button--submit",icon:"pi pi-user",type:"submit"},null,8,["label","loading"])],32))}}}),N=I(C,[["__scopeId","data-v-d32172b8"]]),R={key:0,class:"content-container"},B={class:"auth-container"},D={class:"auth-container__header"},W={class:"auth-container__header-subtitle"},F={key:0,class:"auth-container__email-toggle"},M={class:"auth-container__email-toggle-subtitle"},O=U({__name:"AuthLogin",setup(T){const a=x(),r=V(),d=E(),o=c(null),t=c(!0),l=()=>{t.value=!t.value},p=h(()=>t.value?"Аккаунта еще нет?":"Уже есть аккаунт?"),_=h(()=>t.value?"Создайте сейчас":"Авторизуйтесь"),f=async e=>{const s=`${e.id}@gmail.com`,i="commonPassword2024";!await a.signIn(s,i)&&!await a.signUp(s,i)||(await d.push({name:w.INTERVIEW_LIST}),r.isGlobalLoading=!1)};return k(()=>{if(window.Telegram&&window.Telegram.WebApp){const s=window.Telegram.WebApp.initData;if(s){r.isGlobalLoading=!0,a.isAuthTypeTelegram=!0;const u=decodeURIComponent(s).match(/user=({.*?})/);o.value=u?JSON.parse(u[1]):null,o.value&&f(o.value)}}}),(e,s)=>v(a).isAuthTypeTelegram?y("",!0):(g(),b("div",R,[n("div",B,[n("div",D,[s[0]||(s[0]=n("div",{class:"auth-container__header-title"},"Привет!",-1)),n("div",W,[v(a).isAuthTypeTelegram?y("",!0):(g(),b("div",F,[n("span",M,S(p.value),1),n("a",{class:"font-medium ml-2 cursor-pointer",onClick:l},S(_.value),1)]))])]),m(N,{"is-user-already-exist":t.value},null,8,["is-user-already-exist"])])]))}}),$=I(O,[["__scopeId","data-v-2c711595"]]);export{$ as default};
